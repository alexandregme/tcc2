\documentclass{abntpuc}

\usepackage[pdftex]{graphicx}

\usepackage{fancyhdr}

\begin{document}

%\include{apresentacao}
%\include{introducao}
%\include{referencial}
%\include{metodologia}
%\include{sistema}

\capitulo{SISTEMA DESENVOLVIDO}

Será desenvolvido um sistema que otimiza a alocação das salas facilizando a vida do gerente. Por se tratar de um problema especifico fica dificil encontrar tecnologias disponiveis para a resolução do problema sendo assim necessario o desenvolvimento de um sistema que atenda todas as necessisdades exigidas.

\secao{Modelagem}

\subsecao{Diagramas de caso de uso}

Arrumar referencia \par

Segundo Booch et al. (2001) a modelagem de um diagrama de caso de uso é uma técnica usada para descrever e definir os requisitos funcionais de um sistema. Para sistemas que possuem um número elevado de funcionalidades, a construção destes diagramas visa facilitar o entendimento do problema, a documentação do que será desenvolvido bem como facilita o próprio desenvolvimento.\par

A Figura XX descreve todas as funcionalidades que o sistema possui, essas funcionalidades foram dividias em 2 atores "Gerente" e "Sistema" cada um ligado com suas respectigas funcionalidades, porem, o "Gerente" acessa o "Sistema" para ter acessos funcionalidades do mesmo. O sentido das setas informa o que cada ator pode acessar.\par

\begin{figure}[!htb]
\caption[Diagrama de Caso de Uso]{Diagrama de Caso de Uso}
\label{fig:figura1}
\centering
\includegraphics[scale=0.5]{imagens/diagramaCasoUso.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

\subsecao{Diagrama de Entidade Relacionamento}

Arrumar referencia \par

Por se tratar de uma aplicação de banco de dados, a modelagem de dados foi também construída. Segundo Elmasri & Navathe (2005) a modelagem conceitual é uma fase muito importante no planejamento de uma aplicação de um banco de dados bem sucedida. Ainda segundo Elmasri & Navathe (2005), o modelo relacional representa o banco de dados como uma coleção de relações. Informalmente, cada relação se parece com uma tabela de valores.


Na Figura XXX tem-se o diagrama para o esquema do banco de dados relacional do sistema. \par
Breve explicação de cada tabela? \par


\begin{figure}[!htb]
\caption[Diagrama de Entidade Relacionamento]{Diagrama de Entidade Relacionamento}
\label{fig:figura2}
\centering
\includegraphics[scale=0.55]{imagens/diagramaEntidadeRelacionamento.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

\subsecao{Diagramas de classe}

Quando terminar o codigo revisar.\par

Segundo Booch et al. (2001), Diagrama de Classes demonstram a estrutura estática
das classes de um sistema, onde estas representam as “coisas” que são gerenciadas pela
aplicação modelada. Ainda segundo Booch et al. (2001), uma classe num diagrama pode
ser diretamente implementada utilizando-se uma linguagem de programação orientada a
objetos, no caso deste trabalho, a Linguagem Java.
A partir da Figura 3.7 pode-se observar as classes manipuladores do sistema. Elas
estão identificadas, descritas com seus métodos e relacionadas entre si. Geralmente um
sistema possui mais de um diagrama, pois nem todas se encaixam em um diagrama
específico.

\begin{figure}[!htb]
\caption[Diagrama de Classe]{Diagrama de Classe}
\label{fig:figura3}
\centering
\includegraphics[scale=0.6]{imagens/diagramaClasse.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

\secao{Algoritimo Genético}


O primeiro passo a ser dado para o desenvolvimento do algoritimo é o pleno conhecimento do problema e a ligação entre os termos utilizados na biologia com os itens do problema proposto anteriormente. Foram utilizadas varias fontes para o desenvolvimento do trabalho, porem foram feitas modificação para que o modelo tratado por outros autores funcionasse como necessario.\par

Para o melhor entendimento dos passos tomados durante a interpretação do problema e da sua ligação com o algoritmo genetico será criado um pequeno ambiente de alocação. Este ambiente contem as seguintes propriedades, três salas, seis horarios, sete dias da semana, cinco discplinas e nove relacionamentos de obrigatoriedade entre discplina e horário.\par

\begin{figure}[!htb]
\caption[Representação do ambiente]{Representação do ambiente}
\label{fig:figura4}
\centering
\includegraphics[scale=0.9]{imagens/representacaoAmbiente.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}



\subsecao{Individuo}

Alguns trabalhos tratam cromossomos e inidviduos pela mesma representação biologica, neste caso cromosso neste trabalho o termo cromossomo se refere a segquencia de genes e o termo Indiviuo será a combinação de cromossomo e fitness.\par

O termo Gene representa uma combinação de quatro variaveis Sala, Dia da Semana, Horario, e o relacionamento entre Disciplina Horario. As três primeiras variaveis são fixas e não podem ser nulas pois o conjunto de Genes forma um cromossomo que é a alocação de todas as discplinas em horarios diferentes.\par

Um Gene com o relacionamento Disciplina Horario igual a nulo, representa um horario vago, como exemplo podemos descrever a seguinte situação, mostra que nos determinados parametros não existe nenhuma sala alocada.\par

\begin{figure}[!htb]
\caption[Representação Gene]{Representação Gene}
\label{fig:figura5}
\centering
\includegraphics[scale=0.7]{imagens/representacaoGene.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

Um cromossomo é uma seguencia de genes o que representa uma alocação completa que engloba todas as salas, todos os dias da semana, e todos os horarios disponiveis para alocação de disciplinas. Uma vez que este valor não é variavel temos um cromossomo com um valor fixo, que serão inseridos os horarios disponiveis para alocação das disciplinas. O tamanho do cromossomo é medido pela seguinte formala (Número de Salas * Número de Horários * Número de dias da semana) neste ambiente o valor é igual a 210 Genes que compoe o cromossomo. A representação binaria do cromossomo se deve ao item relacionamento do Gene estar preenchido ou não 1 para preenchido e zero para nulo. A representação gráfica do cromossomo apenas id do relacionamento para uma melhor visualização.\par


\begin{figure}[!htb]
\caption[Representação Cromossomo]{Representação Cromossomo}
\label{fig:figura6}
\centering
\includegraphics[scale=0.8]{imagens/representacaoCromossomo.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

Por fim individuo é a combinação do cromossomo e a pontuação adquirida após a execuação do metodo de calculo de fitness.\par

\begin{figure}[!htb]
\caption[Representação Individuo]{Representação Individuo}
\label{fig:figura7}
\centering
\includegraphics[scale=0.8]{imagens/representacaoIndividuo.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

\subsecao{Populacao}

População é o conjunto de Individuos, a população tem um numero fixo de Individuos, e uma porcentagem para que os operadores geneticos possam ser executados. Os Melhores Individuos de uma População são indicados pelas maiores pontuações de fitness de cada Individuo\par

Populacao Inicial cria Individuos randomicos até que o número da população maxima seja atingida. Para a criação de cada individuo são utilizados operadores randomicos para adicionar os relacionamento DisciplinaHorario em cada um dos Gens que estão previamente criados como Nulo. Uma vez que o Indiviuo inicial é populado a quandiadde de Genes com relacionamento entre as tabelas DisciplinaHorario não se modificaram para ser manter uma itnegridade dos dados que serão utilizados para o resultado final do algoritimo.\par

Nova População é criada a partir de uma População criada anteriormente, se o operador genetico elitismo estiver como valor verdadeiro, inciamos está nova população com 20\% dos melhores Individuos da População anterior. Para cada interação do algoritimo até se completar o número total de Individuos para aquela nova População, podemos ter duas operaçãoes ocorrendo, Mutação e Crossover. Para que estas operações genéticas aconteção são utilizados valores randomicos para serem comparados com os valores dos parametros utilizados para Mutação e Croosover.Em cada interação são selecionados por torneio os pais para o crossover, se der verdadeira a condiação para se executar o crossover os pais descartados e os filhos gerados a partir dos Gens dos pais serão adicionados na nova População. Caso a condição de Mutação seja verdadeira um dos itens selicionados no torneio sofre a mutação genetica, O Individuo antes da mutação genetica é descartado e o Individuo Mutado é adicionado na nova população.
\par

\begin{figure}[!htb]
\caption[Fluxo Nova População]{Fluxo Nova População}
\label{fig:figura8}
\centering
\includegraphics[scale=0.5]{imagens/fluxoNovaPopulacao.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

Melhor Individuo é aquele que contem o resultado o o que tiver a melhor pontuação ao se passar o numero de gerações pré definidas.

\subsecao{Operadores Geneticos}

Este trabalho utiliza elitismo como operador genetico ao se inciar uma nova população, vinte porcento dos melhors individuos são escolhidos para compar a nova população. O elitismo é calculdo atravez da função objetiva criada para o problema especifico do trabalho.\par

Para selecionar os inviduos para realizar o crossover é utilizado metodo de seleção por torneio, são escolhidos três Individuos da população anterior, e destes três são escolhidos os dois com maior pountuação de fitness, os dois Individuos selecionados são enviados para o crossover.\par

Mutacao é a inversão genetica dos genes de um Individuo escolhido randomicamente da população anterior, apos a realização da mutação genetica o individuo é inserido na nova população.\par

Primeiramente são escolhidos dois Genes do cromossomo, apos a escolha randomica dos itens a serem trocados, é feita a troca dos Genes e retornado um Individuo que tem a composição genetica apos a alteração, Apos a mutação este Individuo recebe uma nova nota de fitness de acordo com a sua nova sequencia de Genes e sua adaptação no ambiente, está nota pode ser maior ou menor do que a anterior.\par

\begin{figure}[!htb]
\caption[Representação Mutação]{Representação Mutação}
\label{fig:figura8}
\centering
\includegraphics[scale=0.7]{imagens/representacaoMutacao.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

Crossover é o cruzamento dos Individuos selecionados pela seleção torneio. Explicar com figuras. apos o cruzamento dos individuo os dois filhos gerados são inseridos na nova população.\par





\subsecao{Definição da função objetivo}

Somatorio disso

Para o calculo do fitness foram definidos pesos para modelagem da função, estes pesos podem ser configurados de acordo com a necessidade da alocação.

Graduação alocada ganha 05 de peso

Pós graduação alocada ganha 03 de peso

Periodos na mesma sala cada um ganha 05 de peso * o numero do periodo

Quanditadade de vagas igual a da sala 05 de peso

não optativa ganha 5

optativa ganha 3

iliminacao atendida 5

Criar a função matematica com as legendas conforme o trabalho 117.pdf

Falar o numero de salas, o numero de horarios, o numero de curos o numero de colegiados o numero de periodos o numero de disciplinas para cada colegiado.......

restrições 


falar um pouco das restrições e enumeralas

As disciplinas não podem ser alocadas em horarios direfentes dos que já foram pré definidos pelo colegiado.

As discplinas devem ter apenas a quantidade de alocações necessarias.

As disciplinas devem respeitar a capacidade da sala.

As diciplinas não optativas tem preferencia de alcação na mesma sala.

Preferencias por salas claras ou escuras

Restrição 1 


Fitness

Para se iniciar o calculo do fitness são verificados todos os horarios já alocados somando os pesos se adequados.

para cada gene

se tem horario alocado 

horario bate

capacidade da turma

turma graduacao

optativa

iluminacao

soma tudo

fim se tem alocação

soma tudo

fim para cada gene

Calculo do fitness01 somatatoriox100/colocar algum valor  para dividir não sei ainda

calculo fitness02 penaliza disciplinas com mais alocação do que se deve

para cada gene 

para cada disciplina 

soma

fim

Calculo fitness02 -= fitnes01 x (1 - (total alocados - total necessario/ dividir pelo numero possivel de alocações))
fim

calculo fitness03 penalidade por capacidade

para cada gente

se a sala tiver capacidade diferente

fim

calculo fitness03 = fitness02 x (1 - (numero de erros /  numero de possiveis alocações )))


calculo fitness04 preferencias clara ou escura

para cada gene 

se tiver com o optativo errado 

fim	

calculo fitness04 = fitness03 x (1 - (numero de erros /  numero de possiveis alocações )))


O fitness04 é o resultado final

\subsecao{Fluxo do algoritimo}

O fluxo do algorimo conforme a imagem XX é iniciado pela criação da população inicial, para cada interação do algoritimo é verificado se a população contem o resultado e se o algoritimo não atingiu o numero de gerações pré defindas. Se as duas condições forem falsas o algoritimo cria uma nova População de acordo coma figura XXX

\begin{figure}[!htb]
\caption[Fluxo Algoritimo]{Fluxo Algoritimo}
\label{fig:figura8}
\centering
\includegraphics[scale=0.7]{imagens/fluxoAlgoritimo.png}
\\ \textbf{\footnotesize Fonte: Desenvolvido pelo autor}
\end{figure}

\subsecao{Parametros Algoritimo}

\secao{Arquitetura e Telas do sistema}

%\include{conclusao}

%\referencias{referencias}
%\include{apendices}

\end{document}